<!DOCTYPE html><html lang="en"><head><link rel="stylesheet" href="/static/css/prism.css"><meta charset="UTF-8"><link rel="icon" href="/favicon.ico" sizes="32x32" type="image/x-icon"><meta name="viewport" content="width=device-width, min-width=800"><link rel="stylesheet" href="/static/css/styles.css"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&amp;family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&amp;display=swap" rel="stylesheet"><meta name="description" content="In this article I try to describe why rust and its ownership system are so difficult to learn"><meta name="keywords" content="rust,essay"><title>Rust is a low level language</title></head><body>
<img class="bg" id="main_bg" src="/static/img/bg.jpg" alt="">










<div id="body_wrapper" class="first_body_wrapper"><header><nav><a href="/">
              HOME
          </a><a href="/projects.html">
              PROJECTS
          </a><a href="/tags.html">
              TAGS
          </a></nav><h1 id="main_title">Rust is a low level language</h1><ul class="tags_list"><li><a class="tag_element" href="/tags/rust.html">rust</a></li><li><a class="tag_element" href="/tags/essay.html">essay</a></li></ul><div style="width: calc(100% - 2em); height: 5px; margin: 1em auto 0; border: solid black; border-width: 1px 0;"></div></header><article>
    <p>
        Rust is considered by many to be one of the hardest mainstream programming languages. Many beginners struggle a
        lot when learning rust, despite the excellent tooling, decent standard library, and painless package
        management. That means there is something inherently difficult/tricky about the core language itself that
        newcomers find very difficult to come to terms with.
    </p>
    <p>
        Rust is a huge language and it's increasing in size everyday. It has a lot of complicated features like
        generics, metaprogramming, build scripts etcetra. In this article, I'm going to focus only on the borrow
        checker and the type system, since these are the first core features of the language to trip up newcomers.
    </p>
    <p>
        Take a look at this function:
    </p>
    <prog class=" language-rust" role="figure"><span class="token keyword">fn</span> <span class="token function-definition function">process</span><span class="token punctuation">(</span>file<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> processor<span class="token punctuation">:</span> <span class="token keyword">fn</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">bool</span><span class="token punctuation">,</span> finalizer<span class="token punctuation">:</span> <span class="token keyword">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token class-name">Path</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token class-name">Ok</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">read_to_string</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">and_then</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>content<span class="token closure-punctuation punctuation">|</span></span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> <span class="token keyword">mut</span> line_iter <span class="token operator">=</span> content<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            line_iter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> line_iter
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>s<span class="token closure-punctuation punctuation">|</span></span> <span class="token function">processor</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>a<span class="token punctuation">,</span> b<span class="token closure-punctuation punctuation">|</span></span> a <span class="token operator">&amp;&amp;</span> b<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap_or</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token class-name">Err</span><span class="token punctuation">(</span><span class="token class-name">Error</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token class-name">ErrorKind</span><span class="token punctuation">::</span><span class="token class-name">Other</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">finalizer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></prog>
    <p>
        It reads a file, splits it into lines, skips the first line, processes the rest of the lines, and calls a
        finalizer if all the processing operations succeeded. These are some of the noteworthy things about this code:
    </p>

    <ul>
        <li>
            <p>
                There are exactly three type annotations in this function, all in the function signature. The
                compiler infers everything else on its own.
            </p>
        </li>
        <li>
            <p>
                A lot of objects are being created in this function. Some of them own resources
                (<progi role="figure">read_to_string()</progi>). Others hold references to resource owners (<progi role="figure">line_iter</progi>).
                The compilers (specifically, the borrow checker), ensures that all the resources are freed correctly and
                verifies that all the references are used only within the lifetime of the owner. <em>All of that happens
                automagically from the point of view of the programmer.</em> This is RAII on steroids.
            </p>
        </li>
    </ul>
    <p>
        Because of the borrow checker and the type deduction system, programming in rust feels eerily similar to
        a high level language like javascript. You could say that rust lang comes with a compile time garbage collector.
        In fact, you can go very far by programming in rust like it's nodejs, which is what I suspect beginners do. But,
        sooner or later, you'll hit the limits of the borrow checker. And when that happens, you'll have to start
        thinking about resources and lifetimes. I believe this is the number one gotcha that trips up rust noobies.
    </p>
    <p>
        So noobies find rust difficult <em>because</em> of how marvellous and helpful the borrow checker is, not
        because the borrow checker is too strict. It has to be so strict in order to accomplish what it does.
    </p>
    <blockquote>
        Rust is not a high level language. It is a low level language without a garbage collector.
    </blockquote>
</article><footer>
    <div class="links">
        <div class="social">
            <div class="footer-title">Share this page:</div>
            <a rel="noopener" title="twitter" class="svg-icon twitter" target="_blank" href="https://twitter.com/share?text=Rust is a low level language&amp;url=https://fctorial.github.io/posts/rust_difficult.html"></a>
            <a rel="noopener" title="facebook" class="svg-icon facebook" target="_blank" href="https://www.facebook.com/sharer.php?u=https://fctorial.github.io/posts/rust_difficult.html"></a>
            <a rel="noopener" title="reddit" class="svg-icon reddit" target="_blank" href="https://www.reddit.com/submit?title=Rust is a low level language&amp;url=https://fctorial.github.io/posts/rust_difficult.html"></a>
            <a rel="noopener" title="hacker news" class="svg-icon hn" target="_blank" href="https://news.ycombinator.com/submitlink?t=Rust is a low level language&amp;u=https://fctorial.github.io/posts/rust_difficult.html"></a>
        </div>
        <div class="social">
            <div class="footer-title">Contacts:</div>
            <a rel="noopener" title="github" href="https://github.com/fctorial" class="svg-icon github"></a>
            <a rel="noopener" title="twitter" href="https://twitter.com/fctorial1" class="svg-icon twitter"></a>
            <a rel="noopener" title="email" href="mailto:fctorial@gmail.com" class="svg-icon email"></a>
        </div>
    </div>

<a rel="noopener" class="discussion" target="_blank" href="https://www.reddit.com/r/fctorial/comments/mo5jk7/rust_is_a_low_level_language/">Join the discussion here</a></footer></div></body></html>